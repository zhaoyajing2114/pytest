{"name": "test_new_defence_domain_repeat[重复-多个单IP的防御域:多个中存在一个重复]", "status": "failed", "statusDetails": {"message": "AssertionError: 实际上新增成功\nassert False", "trace": "self = <test_ddos.Test_Ddos object at 0x00000160586D4280>\ndefence_domain_name = '重复-多个单IP的防御域'\nips = '39.98.36.100\\n39.98.36.101\\n39.98.36.103\\n', alarm = '1'\nalarm_type = '100', cluster_name = '绍兴BGP集群', model_name = '模板1'\ncontect = '赵雅静', description = '多个中存在一个重复'\nbrowser = (<selenium.webdriver.chrome.webdriver.WebDriver (session=\"4cc159a7e293460c8f896c5f30c1525e\")>, {'ddos任务列表': <page.ddos...ww.lvluoyun.com', '0922.lvluoyun.com'], 'success_sign': 'ya-phone-fill', 'url': 'http://yundun.test.nodevops.cn', ...})\n\n    @allure.story('验证与已有防御域IP重复的不能新增成功')\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.run(order=10)\n    #@pytest.mark.skip\n    @pytest.mark.parametrize(\n        \"defence_domain_name, ips, alarm, alarm_type, cluster_name, model_name, contect, description\",\n        [('重复-IP段格式的防御域', '39.98.36.1', '1', '1', '绍兴BGP集群', '模板1', '赵雅静', '从IP段格式的IP中取一个'),\n         ('重复-CIDR格式的防御域', '39.98.36.224-226', '1', '1', '绍兴BGP集群', '模板1', '赵雅静', '范围有交集'),\n         ('重复-单IP的防御域', '39.98.36.106', '1', '100', '绍兴BGP集群', '模板1', '赵雅静', '单个重复'),\n         ('重复-多个单IP的防御域', '39.98.36.100\\n'\n                       '39.98.36.101\\n'\n                       '39.98.36.103\\n', '1', '100', '绍兴BGP集群', '模板1', '赵雅静', '多个中存在一个重复')],\n    ids=[\"重复-IP段格式的防御域:从IP段格式的IP中取一个\",\"重复-CIDR格式的防御域:范围有交集\",\"重复-单IP的防御域\",\"重复-多个单IP的防御域:多个中存在一个重复\"])\n    def test_new_defence_domain_repeat(self, defence_domain_name, ips, alarm, alarm_type, cluster_name, model_name,\n                                        contect, description, browser):\n        driver = browser[0]\n        ddos_list = browser[1]['ddos任务列表']\n        ddos_list.refresh()\n        ddos_list.click_menu('业务列表')\n        ddos_list.click_new_domain()\n        # '填写防御域信息：防御域名称：{1} ;防御域IP：{2};告警阈值:{3};告警类型:{4};集群:{5};模板:{6};联系人:{7};描述:{8}'\n        ddos_list.fill_defence_domain(defence_domain_name, ips, alarm, alarm_type, cluster_name, model_name, contect,\n                                      description)\n        ddos_list.click_save()\n        result = ddos_list.get_warning_message('操作失败')\n        assert result, '重复的防御域增加成功'\n        ddos_list.refresh()\n        with allure.step('验证重复的IP不能新增成功'):\n            result_add = ddos_list.verify_element_not_exist('xpath','//div[contains(text(),\"%s\")]'%(defence_domain_name))\n>           assert result_add,'实际上新增成功'\nE           AssertionError: 实际上新增成功\nE           assert False\n\ntest_ddos.py:239: AssertionError"}, "steps": [{"name": "刷新网页", "status": "passed", "start": 1607516725254, "stop": 1607516727607}, {"name": "点击菜单：'业务列表'", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//span[text()=\"DDoS原生清洗\"]/parent::div/..'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//span[text()=\"DDoS原生清洗\"]/parent::div/..'"}, {"name": "time_wait", "value": "5"}], "start": 1607516727608, "stop": 1607516727615}, {"name": "获取元素指定属性的值:'className'", "status": "passed", "parameters": [{"name": "ele", "value": "<selenium.webdriver.remote.webelement.WebElement (session=\"4cc159a7e293460c8f896c5f30c1525e\", element=\"6b21d37f-64c2-4041-93b7-4532828877d5\")>"}, {"name": "attr_name", "value": "'className'"}], "start": 1607516727615, "stop": 1607516727630}, {"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"FeMenuItemGroup__body\")]/div[not(contains(@style,\"none\"))]//span[contains(text(),\"业务列表\")]/ancestor::a'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"FeMenuItemGroup__body\")]/div[not(contains(@style,\"none\"))]//span[contains(text(),\"业务列表\")]/ancestor::a'"}, {"name": "time_wait", "value": "2"}], "start": 1607516727630, "stop": 1607516727640}], "parameters": [{"name": "menu_name", "value": "'业务列表'"}], "start": 1607516727608, "stop": 1607516727679}, {"name": "点击新增防御域", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//span[text()=\"新增防御域\"]/..'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//span[text()=\"新增防御域\"]/..'"}, {"name": "time_wait", "value": "2"}], "start": 1607516727679, "stop": 1607516727695}], "start": 1607516727679, "stop": 1607516727814}, {"name": "填写防御域信息--'多个中存在一个重复'：防御域名称：'重复-多个单IP的防御域' ;防御域IP：'39.98.36.100\n39.98.36.101\n39.98.36.103\n';告警阈值:'1';告警类型:'100';集群:'绍兴BGP集群';模板:'模板1';联系人:'赵雅静';描述:'多个中存在一个重复'", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//input[@placeholder=\"域名称\"]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//input[@placeholder=\"域名称\"]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516727814, "stop": 1607516727828}, {"name": "查找元素:类型-'xpath'，定位：'//textarea[@placeholder=\"0.0.0.0\"]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//textarea[@placeholder=\"0.0.0.0\"]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516728060, "stop": 1607516728077}, {"name": "查找元素:类型-'xpath'，定位：'//input[@aria-label=\"描述文字\"]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//input[@aria-label=\"描述文字\"]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516728528, "stop": 1607516728535}, {"name": "查找元素:类型-'xpath'，定位：'(//div[@aria-label=\"checkbox-group\"]/label)[1]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'(//div[@aria-label=\"checkbox-group\"]/label)[1]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516728655, "stop": 1607516728664}, {"name": "查找元素:类型-'xpath'，定位：'(//div[@aria-label=\"checkbox-group\"]/label)[2]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'(//div[@aria-label=\"checkbox-group\"]/label)[2]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516728664, "stop": 1607516728676}, {"name": "查找元素:类型-'xpath'，定位：'//label[contains(text(),\"清洗设备集群\")]/following-sibling::div[1]//i'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//label[contains(text(),\"清洗设备集群\")]/following-sibling::div[1]//i'"}, {"name": "time_wait", "value": "2"}], "start": 1607516728676, "stop": 1607516728688}, {"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"el-popper\") and not(contains(@style,\"none\"))]//li[contains(text(),\"绍兴BGP集群\")]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"el-popper\") and not(contains(@style,\"none\"))]//li[contains(text(),\"绍兴BGP集群\")]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516728757, "stop": 1607516728772}, {"name": "查找元素:类型-'xpath'，定位：'//label[contains(text(),\"引用配置模板\")]/following-sibling::div[1]//i'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//label[contains(text(),\"引用配置模板\")]/following-sibling::div[1]//i'"}, {"name": "time_wait", "value": "2"}], "start": 1607516728827, "stop": 1607516728845}, {"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"el-popper\") and not(contains(@style,\"none\"))]//li[contains(text(),\"模板1\")]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"el-popper\") and not(contains(@style,\"none\"))]//li[contains(text(),\"模板1\")]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516728898, "stop": 1607516728911}, {"name": "查找元素:类型-'xpath'，定位：'//label[contains(text(),\"告警联系人\")]/following-sibling::div[1]//i'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//label[contains(text(),\"告警联系人\")]/following-sibling::div[1]//i'"}, {"name": "time_wait", "value": "2"}], "start": 1607516729033, "stop": 1607516729046}, {"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"el-popper\") and not(contains(@style,\"none\"))]//li[contains(text(),\"赵雅静\")]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"el-popper\") and not(contains(@style,\"none\"))]//li[contains(text(),\"赵雅静\")]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516729098, "stop": 1607516729117}, {"name": "查找元素:类型-'xpath'，定位：'//input[@placeholder=\"描述\"]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//input[@placeholder=\"描述\"]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516729183, "stop": 1607516729196}], "parameters": [{"name": "defence_domain_name", "value": "'重复-多个单IP的防御域'"}, {"name": "ips", "value": "'39.98.36.100\n39.98.36.101\n39.98.36.103\n'"}, {"name": "alarm", "value": "'1'"}, {"name": "alarm_type", "value": "'100'"}, {"name": "cluster_name", "value": "'绍兴BGP集群'"}, {"name": "model_name", "value": "'模板1'"}, {"name": "contect", "value": "'赵雅静'"}, {"name": "description", "value": "'多个中存在一个重复'"}], "start": 1607516727814, "stop": 1607516729400}, {"name": "点击创建防御域的保存", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"DmDialog\") and not(contains(@style,\"none\"))]/div[@aria-label=\"创建防御域\"]//span[text()=\"保存\"]/..'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"DmDialog\") and not(contains(@style,\"none\"))]/div[@aria-label=\"创建防御域\"]//span[text()=\"保存\"]/..'"}, {"name": "time_wait", "value": "2"}], "start": 1607516729400, "stop": 1607516729415}], "start": 1607516729400, "stop": 1607516729488}, {"name": "获取提示信息", "status": "passed", "steps": [{"name": "校验元素内容是否包含指定的内容:类型-'xpath'，定位：'//div[contains(@class,\"warning\")]//p'，内容：'操作失败'", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"warning\")]//p'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"warning\")]//p'"}, {"name": "time_wait", "value": "6"}], "start": 1607516729488, "stop": 1607516730970}], "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"warning\")]//p'"}, {"name": "ele_text", "value": "'操作失败'"}, {"name": "time_wait", "value": "6"}], "start": 1607516729488, "stop": 1607516731104}], "parameters": [{"name": "text", "value": "'操作失败'"}], "start": 1607516729488, "stop": 1607516731104}, {"name": "刷新网页", "status": "passed", "start": 1607516731104, "stop": 1607516733627}, {"name": "验证重复的IP不能新增成功", "status": "failed", "statusDetails": {"message": "AssertionError: 实际上新增成功\nassert False\n", "trace": "  File \"D:\\workspace\\pytest1\\test_ddos_page\\test_ddos.py\", line 239, in test_new_defence_domain_repeat\n    assert result_add,'实际上新增成功'\n"}, "steps": [{"name": "校验界面上确定不存在某元素:类型-'xpath'，定位：'//div[contains(text(),\"重复-多个单IP的防御域\")]'", "status": "passed", "steps": [{"name": "查找多个元素:类型-'xpath'，定位：'//div[contains(text(),\"重复-多个单IP的防御域\")]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(text(),\"重复-多个单IP的防御域\")]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516733628, "stop": 1607516733643}], "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(text(),\"重复-多个单IP的防御域\")]'"}, {"name": "time_wait", "value": "2"}], "start": 1607516733628, "stop": 1607516733643}], "start": 1607516733627, "stop": 1607516733643}, {"name": "添加失败截图...", "status": "passed", "attachments": [{"name": "失败截图", "source": "7728daa8-b671-4038-a91e-878bd75b0069-attachment.png", "type": "image/png"}], "start": 1607516733672, "stop": 1607516734026}], "parameters": [{"name": "defence_domain_name", "value": "'重复-多个单IP的防御域'"}, {"name": "ips", "value": "'39.98.36.100\n39.98.36.101\n39.98.36.103\n'"}, {"name": "alarm", "value": "'1'"}, {"name": "alarm_type", "value": "'100'"}, {"name": "cluster_name", "value": "'绍兴BGP集群'"}, {"name": "model_name", "value": "'模板1'"}, {"name": "contect", "value": "'赵雅静'"}, {"name": "description", "value": "'多个中存在一个重复'"}], "start": 1607516725254, "stop": 1607516733643, "uuid": "33ca6466-fae7-4a4c-9dd8-311e1a050e19", "historyId": "af49fcac18651204480a31ac88fdd6c5", "testCaseId": "40b8195ef1827e1180bb6ba4c4396ec4", "fullName": "test_ddos_page.test_ddos.Test_Ddos#test_new_defence_domain_repeat", "labels": [{"name": "feature", "value": "ddos页面的测试"}, {"name": "story", "value": "验证与已有防御域IP重复的不能新增成功"}, {"name": "severity", "value": "critical"}, {"name": "tag", "value": "run(order=10)"}, {"name": "parentSuite", "value": "test_ddos_page"}, {"name": "suite", "value": "test_ddos"}, {"name": "subSuite", "value": "Test_Ddos"}, {"name": "host", "value": "LAPTOP-HRAELMRK"}, {"name": "thread", "value": "15284-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_ddos_page.test_ddos"}]}