{"name": "test_new_defence_domain_fail[测试新增防御域1-22.22.22.22-999-1-绍兴BGP---错误的IP段]", "status": "failed", "statusDetails": {"message": "AssertionError: 未提示IP段错误\nassert False", "trace": "self = <test_ddos.Test_Ddos object at 0x000001CFE3AF2C10>\ndefence_domain_name = '测试新增防御域1', ips = '22.22.22.22', alarm = '999'\nalarm_type = '1', cluster_name = '绍兴BGP', model_name = '', contect = ''\ndescription = '错误的IP段'\nbrowser = (<selenium.webdriver.chrome.webdriver.WebDriver (session=\"b84888fb317d3b96d96e95761edd0686\")>, {'ddos任务列表': <page.ddos...ww.lvluoyun.com', '0922.lvluoyun.com'], 'success_sign': 'ya-phone-fill', 'url': 'http://yundun.test.nodevops.cn', ...})\n\n    @pytest.mark.test\n    @allure.story('验证必填项不填写不能正常新增防御域，IP段不在范围内不能新增成功')\n    @allure.severity(allure.severity_level.CRITICAL)\n    @pytest.mark.run(order=8)\n    #@pytest.mark.skip\n    @pytest.mark.parametrize(\n        \"defence_domain_name, ips, alarm, alarm_type, cluster_name, model_name, contect, description\",\n        [('', '', '', '', '', '', '', ''), ('测试新增防御域1', '', '', '', '', '', '', '只填写名称'),\n         ('测试新增防御域1', '39.98.36.1-11', '999', '1', '', '', '', '只不填写集群'),\n         ('测试新增防御域1', '', '999', '1', '绍兴BGP', '', '', '不填写IP'),\n         ('测试新增防御域1', '22.22.22.22', '999', '1', '绍兴BGP', '', '', '错误的IP段')])\n    def test_new_defence_domain_fail(self,defence_domain_name, ips, alarm, alarm_type, cluster_name, model_name, contect, description, browser):\n        driver = browser[0]\n        ddos_list = browser[1]['ddos任务列表']\n        ddos_list.refresh()\n        ddos_list.click_menu('业务列表')\n        ddos_list.click_new_domain()\n        #'填写防御域信息：防御域名称：{1} ;防御域IP：{2};告警阈值:{3};告警类型:{4};集群:{5};模板:{6};联系人:{7};描述:{8}'\n        ddos_list.fill_defence_domain(defence_domain_name, ips, alarm, alarm_type, cluster_name, model_name, contect, description)\n        ddos_list.click_save()\n        if '错误的IP段' in description:\n            result = ddos_list.get_warning_message('IP[22.22.22.22]不在套餐配置的可用IP段内')\n>           assert result,'未提示IP段错误'\nE           AssertionError: 未提示IP段错误\nE           assert False\n\ntest_ddos.py:176: AssertionError"}, "steps": [{"name": "刷新网页", "status": "passed", "start": 1607514746653, "stop": 1607514749083}, {"name": "点击菜单：'业务列表'", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//span[text()=\"DDoS原生清洗\"]/parent::div/..'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//span[text()=\"DDoS原生清洗\"]/parent::div/..'"}, {"name": "time_wait", "value": "5"}], "start": 1607514749084, "stop": 1607514749104}, {"name": "获取元素指定属性的值:'className'", "status": "passed", "parameters": [{"name": "ele", "value": "<selenium.webdriver.remote.webelement.WebElement (session=\"b84888fb317d3b96d96e95761edd0686\", element=\"ed72b904-188a-4401-83d2-8423511c0c63\")>"}, {"name": "attr_name", "value": "'className'"}], "start": 1607514749104, "stop": 1607514749114}, {"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"FeMenuItemGroup__body\")]/div[not(contains(@style,\"none\"))]//span[contains(text(),\"业务列表\")]/ancestor::a'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"FeMenuItemGroup__body\")]/div[not(contains(@style,\"none\"))]//span[contains(text(),\"业务列表\")]/ancestor::a'"}, {"name": "time_wait", "value": "2"}], "start": 1607514749114, "stop": 1607514749129}], "parameters": [{"name": "menu_name", "value": "'业务列表'"}], "start": 1607514749084, "stop": 1607514749179}, {"name": "点击新增防御域", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//span[text()=\"新增防御域\"]/..'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//span[text()=\"新增防御域\"]/..'"}, {"name": "time_wait", "value": "2"}], "start": 1607514749179, "stop": 1607514749198}], "start": 1607514749179, "stop": 1607514749332}, {"name": "填写防御域信息--'错误的IP段'：防御域名称：'测试新增防御域1' ;防御域IP：'22.22.22.22';告警阈值:'999';告警类型:'1';集群:'绍兴BGP';模板:'';联系人:'';描述:'错误的IP段'", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//input[@placeholder=\"域名称\"]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//input[@placeholder=\"域名称\"]'"}, {"name": "time_wait", "value": "2"}], "start": 1607514749333, "stop": 1607514749351}, {"name": "查找元素:类型-'xpath'，定位：'//textarea[@placeholder=\"0.0.0.0\"]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//textarea[@placeholder=\"0.0.0.0\"]'"}, {"name": "time_wait", "value": "2"}], "start": 1607514749544, "stop": 1607514749572}, {"name": "查找元素:类型-'xpath'，定位：'//input[@aria-label=\"描述文字\"]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//input[@aria-label=\"描述文字\"]'"}, {"name": "time_wait", "value": "2"}], "start": 1607514749789, "stop": 1607514749804}, {"name": "查找元素:类型-'xpath'，定位：'(//div[@aria-label=\"checkbox-group\"]/label)[1]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'(//div[@aria-label=\"checkbox-group\"]/label)[1]'"}, {"name": "time_wait", "value": "2"}], "start": 1607514749951, "stop": 1607514749966}, {"name": "查找元素:类型-'xpath'，定位：'(//div[@aria-label=\"checkbox-group\"]/label)[2]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'(//div[@aria-label=\"checkbox-group\"]/label)[2]'"}, {"name": "time_wait", "value": "2"}], "start": 1607514749966, "stop": 1607514749978}, {"name": "查找元素:类型-'xpath'，定位：'//label[contains(text(),\"清洗设备集群\")]/following-sibling::div[1]//i'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//label[contains(text(),\"清洗设备集群\")]/following-sibling::div[1]//i'"}, {"name": "time_wait", "value": "2"}], "start": 1607514749978, "stop": 1607514749992}, {"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"el-popper\") and not(contains(@style,\"none\"))]//li[contains(text(),\"绍兴BGP\")]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"el-popper\") and not(contains(@style,\"none\"))]//li[contains(text(),\"绍兴BGP\")]'"}, {"name": "time_wait", "value": "2"}], "start": 1607514750060, "stop": 1607514750075}, {"name": "查找元素:类型-'xpath'，定位：'//input[@placeholder=\"描述\"]'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//input[@placeholder=\"描述\"]'"}, {"name": "time_wait", "value": "2"}], "start": 1607514750205, "stop": 1607514750224}], "parameters": [{"name": "defence_domain_name", "value": "'测试新增防御域1'"}, {"name": "ips", "value": "'22.22.22.22'"}, {"name": "alarm", "value": "'999'"}, {"name": "alarm_type", "value": "'1'"}, {"name": "cluster_name", "value": "'绍兴BGP'"}, {"name": "model_name", "value": "''"}, {"name": "contect", "value": "''"}, {"name": "description", "value": "'错误的IP段'"}], "start": 1607514749332, "stop": 1607514750376}, {"name": "点击创建防御域的保存", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"DmDialog\") and not(contains(@style,\"none\"))]/div[@aria-label=\"创建防御域\"]//span[text()=\"保存\"]/..'", "status": "passed", "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"DmDialog\") and not(contains(@style,\"none\"))]/div[@aria-label=\"创建防御域\"]//span[text()=\"保存\"]/..'"}, {"name": "time_wait", "value": "2"}], "start": 1607514750376, "stop": 1607514750391}, {"name": "获取成功提示信息", "status": "passed", "steps": [{"name": "校验元素内容是否包含指定的内容:类型-'xpath'，定位：'//div[contains(@class,\"success\")]//p'，内容：'操作成功'", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"success\")]//p'", "status": "passed", "attachments": [{"name": "获取单个元素失败", "source": "f58f55fe-ee8f-41e7-bb01-af909ec4bc55-attachment.png", "type": "image/png"}], "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"success\")]//p'"}, {"name": "time_wait", "value": "6"}], "start": 1607514750449, "stop": 1607514761071}], "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"success\")]//p'"}, {"name": "ele_text", "value": "'操作成功'"}, {"name": "time_wait", "value": "6"}], "start": 1607514750448, "stop": 1607514761180}], "parameters": [{"name": "text", "value": "'操作成功'"}], "start": 1607514750448, "stop": 1607514761180}], "start": 1607514750376, "stop": 1607514761180}, {"name": "获取提示信息", "status": "passed", "steps": [{"name": "校验元素内容是否包含指定的内容:类型-'xpath'，定位：'//div[contains(@class,\"warning\")]//p'，内容：'IP[22.22.22.22]不在套餐配置的可用IP段内'", "status": "passed", "steps": [{"name": "查找元素:类型-'xpath'，定位：'//div[contains(@class,\"warning\")]//p'", "status": "passed", "attachments": [{"name": "获取单个元素失败", "source": "e62d2c19-8520-47fa-94a3-0c4c4fce43fb-attachment.png", "type": "image/png"}], "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"warning\")]//p'"}, {"name": "time_wait", "value": "6"}], "start": 1607514761181, "stop": 1607514771796}], "parameters": [{"name": "type", "value": "'xpath'"}, {"name": "path", "value": "'//div[contains(@class,\"warning\")]//p'"}, {"name": "ele_text", "value": "'IP[22.22.22.22]不在套餐配置的可用IP段内'"}, {"name": "time_wait", "value": "6"}], "start": 1607514761181, "stop": 1607514771902}], "parameters": [{"name": "text", "value": "'IP[22.22.22.22]不在套餐配置的可用IP段内'"}], "start": 1607514761180, "stop": 1607514771902}, {"name": "添加失败截图...", "status": "passed", "attachments": [{"name": "失败截图", "source": "afd2ea1c-0ea5-47e7-9db2-df53e6eafb75-attachment.png", "type": "image/png"}], "start": 1607514771925, "stop": 1607514772252}], "parameters": [{"name": "defence_domain_name", "value": "'测试新增防御域1'"}, {"name": "ips", "value": "'22.22.22.22'"}, {"name": "alarm", "value": "'999'"}, {"name": "alarm_type", "value": "'1'"}, {"name": "cluster_name", "value": "'绍兴BGP'"}, {"name": "model_name", "value": "''"}, {"name": "contect", "value": "''"}, {"name": "description", "value": "'错误的IP段'"}], "start": 1607514746653, "stop": 1607514771902, "uuid": "5d2fe99f-8ddb-49d8-bde5-66b781573bfd", "historyId": "115b396034a34622b47fe6c2cce5fc67", "testCaseId": "d99811d0dc5fa647543d9f2ed21a3e78", "fullName": "test_ddos_page.test_ddos.Test_Ddos#test_new_defence_domain_fail", "labels": [{"name": "severity", "value": "critical"}, {"name": "story", "value": "验证必填项不填写不能正常新增防御域，IP段不在范围内不能新增成功"}, {"name": "feature", "value": "ddos页面的测试"}, {"name": "tag", "value": "test"}, {"name": "tag", "value": "run(order=8)"}, {"name": "parentSuite", "value": "test_ddos_page"}, {"name": "suite", "value": "test_ddos"}, {"name": "subSuite", "value": "Test_Ddos"}, {"name": "host", "value": "LAPTOP-HRAELMRK"}, {"name": "thread", "value": "18160-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_ddos_page.test_ddos"}]}